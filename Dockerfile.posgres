# Use the specific pgvector image you requested
FROM pgvector/pgvector:pg16

# Set the environment variables provided in your file
ENV POSTGRES_USER=athip
ENV POSTGRES_PASSWORD=123456
ENV POSTGRES_DB=ai_agent

# Create the init script directory and add the vector extension script
USER root
RUN mkdir -p /docker-entrypoint-initdb.d && \
    echo "CREATE EXTENSION IF NOT EXISTS vector;" > /docker-entrypoint-initdb.d/init-vector.sql && \
    chown -R postgres:postgres /docker-entrypoint-initdb.d

USER postgres

# Expose the default Postgres port
EXPOSE 5432