FROM ollama/ollama:latest

# Start Ollama server in background and pull models one by one
RUN ollama serve & \
    sleep 5 && \
    ollama pull gemma3:4b && \
    ollama pull qwen3-vl:4b-instruct && \
    ollama pull qwen3-embedding:0.6b && \
    ollama pull qwen3-vl:2b-instruct && \
    pkill ollama

# Expose the standard port
EXPOSE 11434

# Use the base image's default entrypoint
ENTRYPOINT ["ollama", "serve"]
